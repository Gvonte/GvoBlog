{"version":3,"sources":["store/user.js","store/advertise.js","store/category.js","service/getCategory.js","store/articleList.js","store/article.js","store/index.js","components/CardTitle.js","components/Advertise.js","service/getAdvertise.js","components/ArticleInfo.js","components/ArticleList.js","service/getArticleList.js","page/ArticleIndex.js","page/ArticleCreate.js","service/createArticle.js","service/uploadFile.js","page/ArticleId.js","service/getArticle.js","service/deleteComment.js","service/createComment.js","page/Article.js","page/About.js","components/GHeader.js","page/Home.js","page/Login.js","service/login.js","page/Register.js","service/register.js","App.js","global.js","serviceWorker.js","index.js"],"names":["userInfo","JSON","parse","localStorage","getItem","userReducer","state","action","type","setItem","stringify","payload","removeItem","advertiseReducer","getCategory","dispatch","axios","get","then","res","data","categoryReducer","articleListReducer","concat","initial","title","author","content","browse","category","comment","articleReducer","store","createStore","combineReducers","user","advertise","articleList","article","applyMiddleware","thunk","props","className","class","Advertise","connect","ads","getAdvertise","useEffect","loading","length","bodyStyle","padding","map","item","key","id","href","link","ArticleInfo","React","memo","color","ArticleList","getArticleList","page","params","getArticleListFn","rows","setArticleList","withRouter","handleInfiniteOnLoad","k","setState","lastState","count","hasMore","prevProps","this","history","initialLoad","pageStart","loadMore","useWindow","dataSource","size","itemLayout","renderItem","Item","onClick","push","src","cover","alt","description","Category","name","Component","CheckableTag","ArticleIndex","tags","location","exec","search","curTag","Number","useState","showTags","setShowTags","slice","checked","onChange","ArticleCreate","create","token","info","username","message","error","to","form","getFieldDecorator","validateFields","upload","setUpload","datasource","setDatasource","onSubmit","e","a","async","preventDefault","err","values","CategoryId","find","file","response","post","success","catch","msg","labelAlign","labelCol","md","span","lg","wrapperCol","offset","layout","label","rules","required","validator","rule","value","includes","onSearch","searchText","filter","toLowerCase","customRequest","options","FormData","append","headers","uploadFile","onSuccess","fileList","htmlType","TextArea","confirm","moment","locale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","M","MM","y","yy","ArticleId","getArticle","getArticleFn","match","setComment","delComment","cid","okText","cancelText","onOk","delete","deleteComment","style","textAlign","source","target","actions","User","avatar","datetime","updatedAt","startOf","fromNow","Replies","i","index","Article","gutter","xs","sm","exact","path","component","About","Search","GHeader","logout","str","pathname","split","selectedPath","handleClick","selectedKeys","mode","placeholder","val","width","Header","Footer","Content","Home","document","documentElement","clientHeight","body","setH","window","onresize","minHeight","Login","login","loginFn","height","Password","register","registerFn","respone","min","max","App","Register","globalInit","defaults","baseURL","interceptors","request","use","config","user_info","Boolean","hostname","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b05fc7a2.chunk.js","sourcesContent":["import loginFn from '../service/login'\r\nimport registerFn from '../service/register'\r\n\r\nconst userInfo = JSON.parse(localStorage.getItem('user_info')) || {};\r\n\r\nconst userReducer = (state = userInfo, action) => {\r\n    switch (action.type) {\r\n        case 'login':\r\n            localStorage.setItem('user_info', JSON.stringify(action.payload));\r\n            return action.payload;\r\n        case 'logout':\r\n            localStorage.removeItem('user_info');\r\n            return {};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst login = payload => dispatch => {\r\n    return loginFn(payload).then((res) => {\r\n        const data = res.data.data;\r\n        dispatch({ type: 'login', payload: data });\r\n        return res\r\n    });\r\n}\r\n\r\nconst logout = () => ({ type: 'logout' })\r\n\r\nconst register = payload => () => {\r\n    return registerFn(payload);\r\n}\r\n\r\nexport { login, logout, register }\r\nexport default userReducer","import getAdvertiseFn from '../service/getAdvertise'\r\n\r\nconst advertiseReducer = (state = [], action) => {\r\n    switch (action.type) {\r\n        case 'setAdvertise':\r\n            return action.payload || [];\r\n        case 'getAdvertise':\r\n            return state;\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst getAdvertise = () => dispatch => {\r\n    getAdvertiseFn().then(res => {\r\n        dispatch({ type: 'setAdvertise', payload: res.data.data });\r\n    })\r\n}\r\n\r\nexport { getAdvertise }\r\nexport default advertiseReducer\r\n","import getCategoryFn from '../service/getCategory'\r\n\r\nconst categoryReducer = (state = [], action) => {\r\n    switch (action.type) {\r\n        case 'setCategory':\r\n            return action.payload || [];\r\n        case 'getCategory':\r\n            return state;\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst getCategory = () => dispatch => {\r\n    return getCategoryFn().then(res => {\r\n        dispatch({ type: 'setCategory', payload: res.data.data });\r\n        return res\r\n    })\r\n}\r\n\r\nexport { getCategory }\r\nexport default categoryReducer\r\n","import axios from 'axios'\r\n\r\nexport default () => {\r\n    return axios.get('/category')\r\n}","import getArticleListFn from '../service/getArticleList'\r\n\r\nconst articleListReducer = (state = [], action) => {\r\n    switch (action.type) {\r\n        case 'concatArticleList':\r\n            return state.concat(action.payload) || [];\r\n        case 'setArticleList':\r\n            return action.payload;\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst getArticleList = (id, page, key) => dispatch => {\r\n    return getArticleListFn(id, page, key).then(res => {\r\n        if (res.data.data.rows.length) {\r\n            dispatch({ type: 'concatArticleList', payload: res.data.data.rows });\r\n        }\r\n        return res\r\n    })\r\n}\r\nconst setArticleList = payload => ({ type: 'setArticleList', payload })\r\n\r\nexport { getArticleList, setArticleList }\r\nexport default articleListReducer\r\n","import getArticleFn from '../service/getArticle'\r\n\r\nconst initial = {\r\n    title: '',\r\n    author: '',\r\n    content: '',\r\n    browse: '',\r\n    category: '',\r\n    comment: []\r\n};\r\n\r\nconst articleReducer = (state = initial, action) => {\r\n    switch (action.type) {\r\n        case 'setArticle':\r\n            return action.payload || initial;\r\n        case 'getArticle':\r\n            return state;\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst getArticle = id => dispatch => {\r\n    return getArticleFn(id).then(res => {\r\n        const { title, author, content, browse, Category: { name: category } } = res.data.data.article;\r\n        const comment = res.data.data.comment.rows;\r\n        dispatch({ type: 'setArticle', payload: { title, author, content, browse, category, comment } });\r\n        return res\r\n    })\r\n}\r\n\r\nexport { getArticle }\r\nexport default articleReducer\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport user from './user'\r\nimport advertise from './advertise'\r\nimport category from './category'\r\nimport articleList from './articleList'\r\nimport article from './article'\r\n\r\nconst store = createStore(\r\n    combineReducers({ user, advertise, category, articleList, article }),\r\n    applyMiddleware(thunk)\r\n)\r\n\r\nexport default store;","import React from 'react'\r\nimport './CardTitle.css'\r\nimport { Icon } from 'antd';\r\n\r\nexport default function (props) {\r\n    return (\r\n        // icon和文字对齐，display: 'flex'\r\n        <div className=\"card-title-container\">\r\n            <Icon type={props.type} className={props.class} />\r\n            <span className=\"title\">{props.title}</span>\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport './Advertise.css'\r\nimport { Card, Icon } from 'antd';\r\nimport CardTitle from './CardTitle'\r\n// import getAdvertise from '../service/getAdvertise'\r\nimport { getAdvertise } from '../store/advertise'\r\n\r\nconst Advertise = connect(state => ({\r\n    ads: state.advertise\r\n}), {\r\n    getAdvertise\r\n})(function (props) {\r\n    const { ads, getAdvertise } = props\r\n    useEffect(() => {\r\n        getAdvertise();\r\n    }, [getAdvertise]);\r\n    return (\r\n        <div className=\"advertise-container\">\r\n            <Card\r\n                title={<CardTitle type=\"bars\" class=\"card-title\" title=\"广告\" />}\r\n                loading={ads.length === 0}\r\n                className=\"card\"\r\n                bodyStyle={{ padding: '10px 24px' }}\r\n            >\r\n                {ads.map(item => {\r\n                    return (\r\n                        <div key={item.id} className=\"link-container\">\r\n                            <a href={item.link} className=\"link\">{item.title}</a>\r\n                            <Icon type=\"right\" className=\"arrow\" />\r\n                        </div>\r\n                    )\r\n                })}\r\n            </Card>\r\n            <Card\r\n                title={<CardTitle type=\"api\" class=\"card-title\" title=\"链接\" />}\r\n                className=\"card\"\r\n                bodyStyle={{ padding: '10px 24px' }}\r\n            >\r\n                <div className=\"link-container\">\r\n                    <a href=\"https://github.com/Gvonte\" className=\"link\">My GitHub</a>\r\n                    <Icon type=\"right\" className=\"arrow\" />\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default Advertise","import axios from 'axios'\r\n\r\nexport default () => {\r\n    return axios.get('/advertise')\r\n}","import React from 'react'\r\nimport './ArticleInfo.css'\r\nimport { Tag, Icon } from 'antd';\r\n\r\nconst ArticleInfo = React.memo(function (props) {\r\n    const { category, author, browse } = props;\r\n    return (\r\n        <div className='articleinfo-container' >\r\n            <Tag color=\"rgb(234, 241, 255)\" className=\"category\">{category}</Tag>\r\n            <Icon type=\"user\" className=\"icon\" />\r\n            <span className=\"iconfont\">{author}</span>\r\n            <Icon type=\"eye\" className=\"icon\" />\r\n            <span className=\"iconfont\">{browse}</span>\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default ArticleInfo","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getArticleList, setArticleList } from '../store/articleList'\r\nimport { withRouter } from 'react-router-dom'\r\nimport './ArticleList.css'\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport { List, Spin } from 'antd';\r\nimport ArticleInfo from '../components/ArticleInfo'\r\n\r\nconst ArticleList = connect(state => ({\r\n    articleList: state.articleList\r\n}), {\r\n    getArticleList, setArticleList\r\n})(withRouter(class extends Component {\r\n    /**\r\n     * 通过这次分页滚动加载组件编写，我了解到：\r\n     *   1. 多个setState更新（setState是异步更新）可能会被合并成一个，以最后一个为主\r\n     *   2. 在setState中将参数改为函数，而不是对象，能确保state是目前最新的那个state\r\n     *   3. setState是异步的，如果在请求成功后的函数中setState，那么那个时候取到的state是在上级作用域中查找，而导致state可能是旧的state，不是最新的（因为在请求返回之前，可能有其他一系列操作更新了state），所以要用函数参数形式确保是最新的state\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        // console.log(\"刷新\", id, state, articleList);\r\n        this.state = {\r\n            hasMore: true,\r\n            loading: false,\r\n            page: 1\r\n        }\r\n    }\r\n    handleInfiniteOnLoad = () => {\r\n        // console.log(\"分页请求\", state);\r\n        const { category: id, k, articleList, getArticleList } = this.props;\r\n        const { page } = this.state;\r\n        this.setState(lastState => ({\r\n            ...lastState,\r\n            loading: true\r\n        }));\r\n        getArticleList(id, page, k).then(res => {\r\n            // console.log(\"请求成功\");\r\n            const { rows, count } = res.data.data;\r\n            if (count === articleList.length + rows.length) {\r\n                // 文章已经全部加载完毕\r\n                this.setState(lastState => {\r\n                    return {\r\n                        hasMore: false,\r\n                        loading: false,\r\n                        page: lastState.page + 1,\r\n                    };\r\n                })\r\n            } else {\r\n                this.setState(lastState => {\r\n                    return {\r\n                        hasMore: true,\r\n                        loading: false,\r\n                        page: lastState.page + 1\r\n                    };\r\n                })\r\n            }\r\n        });\r\n    };\r\n    // 因为props中的page，和控制分页加载数据的state都会导致组件刷新，所以需要对id单独判断，如果是id变量改变，即分类改变了，则应该将articleList等数据恢复初值\r\n    componentDidUpdate(prevProps) {\r\n        const { setArticleList } = this.props;\r\n        if (this.props.category !== prevProps.category) {\r\n            // console.log(\"id改变\");\r\n            setArticleList([]);\r\n            this.setState({\r\n                hasMore: true,\r\n                loading: false,\r\n                page: 1\r\n            }, () => {\r\n                this.handleInfiniteOnLoad();\r\n            });\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        // console.log(\"初始化第一次请求\");\r\n        this.handleInfiniteOnLoad();\r\n    }\r\n    componentWillUnmount() {\r\n        const { setArticleList } = this.props;\r\n        setArticleList([]);\r\n    }\r\n\r\n    render() {\r\n        const { loading, hasMore } = this.state;\r\n        const { articleList, history } = this.props;\r\n        return (\r\n            <div className=\"articlelist-container\">\r\n                {/**\r\n                 * initialLoad:true   刚进来就执行一次loadMore中的方法\r\n                 * pageStart:0        初始页为0，但是执行loadMore方法的初始值是1\r\n                 * hasMore            必须要loading状态和hasMore本身一起判断，loading的时候会改变state值导致重新刷新，如果只有hasMore就会继续分页请求，所以需要loading态一起控制\r\n                 */}\r\n                <InfiniteScroll\r\n                    initialLoad={false}\r\n                    pageStart={0}\r\n                    loadMore={this.handleInfiniteOnLoad}\r\n                    hasMore={!loading && hasMore}\r\n                    useWindow={true}\r\n                >\r\n                    <List\r\n                        dataSource={articleList}\r\n                        size=\"large\"\r\n                        itemLayout=\"vertical\"\r\n                        renderItem={item => (\r\n                            <List.Item\r\n                                key={item.id}\r\n                                className='article-list-item'\r\n                                onClick={() => { history.push(`/article/${item.id}`) }}\r\n                            >\r\n                                <img src={item.cover} alt=\"\" />\r\n                                <h1>{item.title}</h1>\r\n                                <p>{item.description}</p>\r\n                                <ArticleInfo category={item.Category.name} author={item.author} browse={item.browse} />\r\n                            </List.Item>\r\n                        )}\r\n                    >\r\n                        {/* 正在加载下一页的文章 */}\r\n                        {loading && hasMore && (\r\n                            <div className=\"demo-loading-container\">\r\n                                <Spin />\r\n                            </div>\r\n                        )}\r\n                    </List>\r\n                </InfiniteScroll>\r\n            </div >\r\n        )\r\n    }\r\n}))\r\n\r\nexport default ArticleList","import axios from 'axios'\r\n\r\nexport default (id, page, key) => {\r\n    if (key) {\r\n        return axios.get('/article', {\r\n            params: { page, key }\r\n        })\r\n    }\r\n\r\n    if (id === 0) {\r\n        return axios.get('/article', {\r\n            params: { page }\r\n        })\r\n    } else {\r\n        return axios.get('/article', {\r\n            params: {\r\n                category: id,\r\n                page\r\n            }\r\n        })\r\n    }\r\n}   ","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getCategory } from '../store/category'\r\nimport './ArticleIndex.css'\r\nimport { Tag } from 'antd'\r\nimport ArticleList from '../components/ArticleList'\r\n\r\nconst { CheckableTag } = Tag;\r\n\r\nconst ArticleIndex = connect(state => ({\r\n    tags: state.category\r\n}), {\r\n    getCategory\r\n})(function (props) {\r\n    const { tags, getCategory, location, history } = props;\r\n    let key = /key=(.+)/.exec(location.search);\r\n    if (key) {\r\n        // 对传入的key值处理\r\n        key = key[1];\r\n    }\r\n    let curTag = /category=(\\d+)/.exec(location.search);\r\n    curTag = curTag ? Number(curTag[1]) : 0; //当前选中的分类的id\r\n    const [showTags, setShowTags] = useState([]); //当前展示的分类有哪些\r\n    useEffect(() => {\r\n        if (tags.length === 0) {\r\n            getCategory().then(res => {\r\n                setShowTags(res.data.data.slice(0, 8));\r\n            })\r\n        } else {\r\n            setShowTags(tags.slice(0, 8));\r\n        }\r\n    }, [getCategory, tags]);\r\n    const extend = () => {\r\n        setShowTags(tags);\r\n    }\r\n    const reduce = () => {\r\n        setShowTags(tags.slice(0, 8));\r\n    }\r\n    return (\r\n        <div className=\"articleindex-container\">\r\n            <div className=\"tag-container\">\r\n                <CheckableTag\r\n                    key={0}\r\n                    className=\"tag\"\r\n                    checked={curTag === 0}\r\n                    onChange={() => { history.push('/article') }}\r\n                >\r\n                    全部\r\n                </CheckableTag>\r\n                {showTags.map(item => {\r\n                    return (\r\n                        <CheckableTag\r\n                            key={item.id}\r\n                            className=\"tag\"\r\n                            checked={item.id === curTag}\r\n                            onChange={() => { history.push(`/article?category=${item.id}`) }}\r\n                        >\r\n                            {item.name}\r\n                        </CheckableTag>\r\n                    )\r\n                })}\r\n                {tags.length === 0 ? \"\" : tags.length !== showTags.length ? (<CheckableTag\r\n                    key={-1}\r\n                    className={[\"extend\", \"tag\"]}\r\n                    onChange={extend}\r\n                >\r\n                    展开\r\n                </CheckableTag>) : (<CheckableTag\r\n                        key={-2}\r\n                        className={[\"reduce\", \"tag\"]}\r\n                        onChange={reduce}\r\n                    >\r\n                        收起\r\n                </CheckableTag>)}\r\n            </div>\r\n            <ArticleList category={curTag} k={key} />\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default ArticleIndex","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getCategory } from '../store/category'\r\nimport { Redirect } from 'react-router-dom'\r\nimport './ArticleCreate.css'\r\nimport { Form, Input, Button, Icon, Upload, message, AutoComplete } from 'antd'\r\nimport uploadFile from '../service/uploadFile'\r\nimport createArticle from '../service/createArticle'\r\n\r\nconst ArticleCreate = connect(state => ({\r\n    category: state.category,\r\n    userInfo: state.user\r\n}), {\r\n    getCategory\r\n})((Form.create({})(function (props) {\r\n    const { userInfo } = props;\r\n    if (!userInfo.token) {\r\n        return <Redirect to=\"/login\" />\r\n    } else if (userInfo.info.username !== 'admin1') {\r\n        message.error('很抱歉，您没有新建博客的权限');\r\n        return <Redirect to=\"/\" />\r\n    } else {\r\n        const { category, getCategory, form, history } = props;\r\n        const { getFieldDecorator, validateFields } = form;\r\n        const [upload, setUpload] = useState([]);\r\n        const [datasource, setDatasource] = useState([])\r\n        useEffect(() => {\r\n            if (category.length === 0) {\r\n                getCategory();\r\n            }\r\n        }, [category.length, getCategory]);\r\n        const handleSubmit = async e => {\r\n            e.preventDefault();\r\n            validateFields((err, values) => {\r\n                let { title, description, CategoryId, content } = values;\r\n                if (!err) {\r\n                    CategoryId = category.find(item => item.name === CategoryId).id;\r\n                    content = content.file.response.file;\r\n                    createArticle({ title, description, CategoryId, content }).then(res => {\r\n                        message.success(\"新建文章成功\");\r\n                        history.push(`/article/${res.data.data.id}`);\r\n                    }).catch(err => {\r\n                        message.error(err.response.data.msg);\r\n                    })\r\n                }\r\n            });\r\n        };\r\n        const onSearch = (searchText) => {         \r\n            const data = category.map(item => item.name);\r\n            if (!searchText) {\r\n                setDatasource(data);\r\n            } else {\r\n                setDatasource(data.filter(item => item.toLowerCase().includes(searchText.toLowerCase())));\r\n            }\r\n        };\r\n        return (\r\n            <Form onSubmit={handleSubmit} className=\"articlecreate-container\"\r\n                labelAlign=\"left\"\r\n                labelCol={{ md: { span: 3 }, lg: { span: 2 } }}\r\n                wrapperCol={{ md: { offset: 3 }, lg: { offset: 2 } }}\r\n                layout=\"horizontal\">\r\n                <Form.Item label=\"标题\">\r\n                    {getFieldDecorator('title', {\r\n                        rules: [{ required: true, message: '请输入标题!' }]\r\n                    })(\r\n                        <Input className=\"input\" />\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item label=\"描述\">\r\n                    {getFieldDecorator('description', {\r\n                        rules: [{ required: true, message: '请输入描述!' }]\r\n                    })(\r\n                        <Input className=\"input\" />\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item label=\"分类\">\r\n                    {getFieldDecorator('CategoryId', {\r\n                        rules: [\r\n                            { required: true, message: '请输入分类!' },\r\n                            {\r\n                                validator(rule, value) {\r\n                                    const categories = category.map(item => item.name);\r\n                                    return categories.includes(value)\r\n                                },\r\n                                message: '请输入正确的分类！',\r\n                            }\r\n                        ]\r\n                    })(\r\n                        <AutoComplete dataSource={datasource} onSearch={onSearch}>\r\n                            <Input className=\"input\" />\r\n                        </AutoComplete>\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item label=\"上传\">\r\n                    {getFieldDecorator('content', {\r\n                        rules: [{ required: true, message: '请上传内容!' }]\r\n                    })(\r\n                        <Upload\r\n                            name='file'\r\n                            customRequest={options => {\r\n                                uploadFile(options.file).then(res => {\r\n                                    options.onSuccess(res.data.data);\r\n                                });\r\n                            }}\r\n                            fileList={upload}\r\n                            onChange={(info) => {\r\n                                if (info.fileList.length === 0) {\r\n                                    setUpload([])\r\n                                } else {\r\n                                    setUpload([info.file])\r\n                                }\r\n                            }}\r\n                        >\r\n                            <Button >\r\n                                <Icon type=\"upload\" />上传博客（MD文件）\r\n                        </Button>\r\n                        </Upload>\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"btn\">新建博客</Button>\r\n                </Form.Item>\r\n            </Form>\r\n        )\r\n    }\r\n})))\r\n\r\nexport default ArticleCreate","import axios from 'axios'\r\n\r\nexport default payload => {\r\n    return axios.post('/article', payload)\r\n}","import axios from 'axios'\r\n\r\nexport default file => {\r\n    const data = new FormData();\r\n    data.append('file', file);\r\n    return axios.post('/upload', data, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" }\r\n    })\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getArticle } from '../store/article'\r\nimport './ArticleId.css'\r\nimport { Icon, Comment, Avatar, Input, Button, Modal, message } from 'antd'\r\nimport ArticleInfo from '../components/ArticleInfo'\r\nimport createComment from '../service/createComment'\r\nimport deleteComment from '../service/deleteComment'\r\nimport Markdown from 'react-markdown'\r\nimport moment from 'moment'\r\n\r\nconst { TextArea } = Input;\r\nconst { confirm } = Modal;\r\n\r\nmoment.locale('zh-cn', {\r\n    relativeTime: {\r\n        future: '%s内',\r\n        past: '%s前',\r\n        s: '几秒',\r\n        ss: '%d秒',\r\n        m: '1分钟',\r\n        mm: '%d分钟',\r\n        h: '1小时',\r\n        hh: '%d小时',\r\n        d: '1天',\r\n        dd: '%d天',\r\n        M: '1个月',\r\n        MM: '%d个月',\r\n        y: '1年',\r\n        yy: '%d年'\r\n    },\r\n});\r\n\r\nconst ArticleId = connect(state => ({\r\n    article: state.article\r\n}), {\r\n    getArticle\r\n})(function (props) {\r\n    const { match: { params: { id } }, article, getArticle, history } = props;\r\n    useEffect(() => {\r\n        getArticle(id);\r\n    }, [getArticle, id]);\r\n    const [comment, setComment] = useState('')\r\n    const onChange = (e) => {\r\n        setComment(e.target.value)\r\n    }\r\n    const onSubmit = () => {\r\n        if (!comment) {\r\n            return\r\n        }\r\n        if (localStorage.getItem('user_info')) {\r\n            createComment({ content: comment, ArticleId: id }).then(() => {\r\n                message.success(\"评论成功！\");\r\n                setComment('')\r\n                getArticle(id);\r\n            }).catch();\r\n        } else {\r\n            confirm({\r\n                title: '登陆后添加评论',\r\n                content: '是否跳转到登录页',\r\n                okText: '是',\r\n                cancelText: '否',\r\n                onOk() {\r\n                    history.push('/login')\r\n                }\r\n            });\r\n        }\r\n    }\r\n    const delComment = cid => {\r\n        confirm({\r\n            title: '删除评论',\r\n            content: '确定删除吗',\r\n            okText: '确定',\r\n            cancelText: '取消',\r\n            onOk() {\r\n                deleteComment(cid).then((res) => {\r\n                    message.success(\"删除成功！\");\r\n                    getArticle(id);\r\n                })\r\n            }\r\n        });\r\n    }\r\n    return (\r\n        <div className='articleid-container'>\r\n            <h1 className='title'>{article.title}</h1>\r\n            <div className='detail'>\r\n                <ArticleInfo style={{ textAlign: 'center' }} category={article.category} author={article.author} browse={article.browse} />\r\n                <Icon type=\"message\" className='icon' />\r\n                <span className='iconfont'>{article.comment.length}</span>\r\n            </div>\r\n            <Markdown className='content' source={article.content} />\r\n            {article.comment.length ? <p className='comment-title'>\r\n                <Icon type=\"alert\" />&nbsp;\r\n                {`${article.comment.length}条评论`}\r\n            </p> : ''}\r\n            <TextArea rows={4} onChange={onChange} value={comment} />\r\n            <Button htmlType=\"submit\" onClick={onSubmit} type=\"primary\" className=\"btn\">添加评论</Button>\r\n            {article.comment.map(item => (\r\n                <Comment\r\n                    key={item.id}\r\n                    className='comment-container'\r\n                    actions={\r\n                        ((item.User && item.User.username) || 'user') === (localStorage.getItem('user_info') && JSON.parse(localStorage.getItem('user_info')).info.username) ?\r\n                            [<span onClick={() => { delComment(item.id) }}>删除</span>, <span key=\"comment-nested-reply-to\">点击回复</span>] : [<span key=\"comment-nested-reply-to\">点击回复</span>]\r\n                    }\r\n                    author={<span>{(item.User && item.User.username) || 'user'}</span>}\r\n                    avatar={\r\n                        <Avatar\r\n                            src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\r\n                            alt={(item.User && item.User.username) || 'user'}\r\n                        />\r\n                    }\r\n                    content={\r\n                        <p>{item.content}</p>\r\n                    }\r\n                    datetime={(\r\n                        <span>\r\n                            {moment(item.updatedAt).startOf('second').fromNow()}\r\n                        </span>\r\n                    )}\r\n                >\r\n                    {item.Replies.map((i, index) => (\r\n                        <Comment\r\n                            key={index}\r\n                            className='comment-container'\r\n                            actions={[<span key=\"comment-nested-reply-to\">点击回复</span>]}\r\n                            author={<span>{(i.User && i.User.username) || 'user'}</span>}\r\n                            avatar={\r\n                                <Avatar\r\n                                    src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\r\n                                    alt={(i.User && i.User.username) || 'user'}\r\n                                />\r\n                            }\r\n                            content={\r\n                                <p>{i.content}</p>\r\n                            }\r\n                            datetime={(\r\n                                <span>\r\n                                    {moment(i.updatedAt).startOf('second').fromNow()}\r\n                                </span>\r\n                            )}\r\n                        ></Comment>\r\n                    ))}\r\n                </Comment>\r\n            ))}\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default ArticleId","import axios from 'axios'\r\n\r\nexport default id => {\r\n    return axios.get(`/article/${id}`)\r\n}","import axios from 'axios'\r\n\r\nexport default id => {\r\n    return axios.delete(`/comment/${id}`)\r\n}","import axios from 'axios'\r\n\r\nexport default payload => {\r\n    return axios.post('/comment', payload)\r\n}","import React from \"react\";\r\nimport './Article.css'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport { Row, Col } from 'antd';\r\nimport Advertise from '../components/Advertise'\r\nimport ArticleIndex from './ArticleIndex'\r\nimport ArticleCreate from './ArticleCreate'\r\nimport ArticleId from './ArticleId'\r\n\r\nfunction Article() {\r\n    return (\r\n        <div className=\"page-article-container\">\r\n            <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }}>\r\n                <Col span={18}>\r\n                    <Switch>\r\n                        <Route exact path=\"/\" component={ArticleIndex} />\r\n                        <Route exact path=\"/article\" component={ArticleIndex} />\r\n                        <Route path=\"/article/create\" component={ArticleCreate} />\r\n                        <Route path=\"/article/:id\" component={ArticleId} />\r\n                    </Switch>\r\n                </Col>\r\n                <Col span={6}>\r\n                    <Advertise />\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Article","import React from \"react\";\r\nimport './About.css'\r\n\r\nfunction About() {\r\n    return (\r\n        <div className=\"page-about-container\">\r\n            <span className=\"img\"></span>\r\n            <p className=\"first-p\">Hello，欢迎您来到这里，您可以叫我<strong>阿金</strong>，也可以叫我<strong>Gvonte</strong>，这个网站是属于我的个人博客网站，同时也在 <a href=\"https://github.com/Gvonte\">Github</a> 上开源了此项目代码。您有兴趣也可以在 <a href=\"https://github.com/Gvonte\">GitHub</a> 上进行进一步的交流。本人平时会在此网站上发布一些自己学习的<strong>心得和笔记</strong>（主要针对<strong>前端开发</strong>），也欢迎您提出宝贵的意见</p>\r\n            <p>博客的内容：积极向上的文章。</p>\r\n            <p>博客的愿景：和更多的朋友一起学习进步。</p>\r\n            <p>博客的风格：简约至上。</p>\r\n            <p className=\"last-p\">最后，祝大家每天开心，每天幸福！</p>\r\n        </div>\r\n    );\r\n}\r\nexport default About","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { logout } from '../store/user'\r\nimport { withRouter } from 'react-router-dom'\r\nimport './GHeader.css'\r\nimport { Menu, Input, Icon, Button } from 'antd';\r\n\r\nconst { Search } = Input;\r\n\r\nconst GHeader = connect(state => ({\r\n    userInfo: state.user\r\n}), {\r\n    logout\r\n})(withRouter(function (props) {\r\n    const { history, location, userInfo, logout } = props;\r\n    const keyAry = [\r\n        { path: '/article', name: \"文章\" },\r\n        { path: '/about', name: \"关于\" }\r\n    ];\r\n    const str = '/' + location.pathname.split('/')[1];\r\n    const selectedPath = str === '/' ? '/article' : str;\r\n    const handleClick = e => {\r\n        history.push(e.key);\r\n    }\r\n    const handleSubmit = val => {\r\n        if (val) {\r\n            history.push(`/article?key=${val}`);\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"header-container\" >\r\n            <div className=\"left\">\r\n                <h1 className=\"brand\" onClick={() => {\r\n                    handleClick({ key: '/' });\r\n                }}>GvoBlog</h1>\r\n                <Menu\r\n                    onClick={handleClick}\r\n                    selectedKeys={selectedPath}\r\n                    mode=\"horizontal\"\r\n                    className=\"menu\"\r\n                >\r\n                    {keyAry.map(item => {\r\n                        return <Menu.Item key={item.path} className=\"menu-item\">{item.name}</Menu.Item>\r\n                    })}\r\n                </Menu>\r\n            </div>\r\n            <div>\r\n                <Search\r\n                    placeholder=\"搜索你想阅读的文章...\"\r\n                    onSearch={handleSubmit}\r\n                    style={{ width: 200 }}\r\n                />\r\n                <Button type=\"primary\" className=\"btn\" onClick={() => { history.push('/article/create') }}>写博客</Button>\r\n                {\r\n                    userInfo.token ?\r\n                        <Icon type=\"logout\" onClick={logout} className=\"icon logout\" />\r\n                        :\r\n                        <Icon type=\"login\" className=\"icon login\" onClick={() => { history.push('/login') }} />\r\n\r\n                }\r\n            </div>\r\n        </div >\r\n    )\r\n}))\r\n\r\nexport default GHeader","import React, { useState } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { Layout, BackTop } from 'antd';\r\nimport Article from './Article'\r\nimport About from './About'\r\nimport GHeader from '../components/GHeader'\r\nimport './Home.css'\r\n\r\nconst { Header, Footer, Content } = Layout;\r\n\r\nfunction Home() {\r\n  const [h, setH] = useState(document.documentElement.clientHeight || document.body.clientHeight);\r\n  window.onresize = () => {\r\n    setH(document.documentElement.clientHeight || document.body.clientHeight)\r\n  };\r\n  return (\r\n    <div>\r\n      <Layout style={{ minHeight: h }}>\r\n        <BackTop />\r\n        <Header className=\"home-header\"><GHeader /></Header>\r\n        <Content className=\"home-content\">\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Article} />\r\n            <Route path=\"/article\" component={Article} />\r\n            <Route path=\"/about\" component={About} />\r\n          </Switch>\r\n        </Content>\r\n        <Footer className=\"home-footer\">www.gvoblog.com - Blog System Copyright© Author Gvonte</Footer>\r\n      </Layout >\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { login } from '../store/user'\r\nimport {Link} from 'react-router-dom'\r\nimport './Login.css'\r\nimport { Form, Input, Button, message } from 'antd';\r\n\r\nconst Login = connect(null, {\r\n    login\r\n})(Form.create({})(function (props) {\r\n    const { history, login, form } = props;\r\n    const { getFieldDecorator, validateFields } = form;\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        validateFields((err, values) => {\r\n            if (!err) {\r\n                login(values).then(() => {\r\n                    // 登录成功      \r\n                    message.success(\"登录成功\");\r\n                    history.push('/');\r\n                }).catch(err => {\r\n                    // 登录失败\r\n                    message.error(err.response.data.msg);\r\n                })\r\n            }\r\n        });\r\n    };\r\n    return (\r\n        <div className=\"back\" style={{ height: document.documentElement.clientHeight || document.body.clientHeight }}>\r\n            <div className=\"back1\"></div>\r\n            <Form onSubmit={handleSubmit} className=\"login-container\">\r\n                <h1>GvoBlog</h1>\r\n                <h2>一个共同成长的平台</h2>\r\n                <Form.Item>\r\n                    {getFieldDecorator('username', {\r\n                        rules: [{ required: true, message: '请输入用户名!' }]\r\n                    })(\r\n                        <Input placeholder=\"用户名\" className=\"input\" />\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('password', {\r\n                        rules: [{ required: true, message: '请输入密码!' }]\r\n                    })(\r\n                        <Input.Password placeholder=\"密码\" className=\"input\" />\r\n                    )}\r\n                </Form.Item>\r\n                <Button type=\"primary\" htmlType=\"submit\" className=\"btn\">登录</Button>\r\n                <p className=\"register\">没有账号？<Link to=\"/register\">去注册</Link></p>\r\n            </Form>\r\n        </div>\r\n    )\r\n}))\r\n\r\nexport default Login","import axios from 'axios'\r\n\r\nexport default payload => {\r\n    return axios.post('/login', payload)\r\n}","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { register } from '../store/user'\r\nimport { Link } from 'react-router-dom'\r\nimport './Register.css'\r\nimport { Form, Input, Button, message } from 'antd';\r\n\r\nconst Login = connect(null, {\r\n    register\r\n})(Form.create({})(function (props) {\r\n    const { history, register, form } = props;\r\n    const { getFieldDecorator, validateFields } = form;\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        validateFields((err, values) => {\r\n            if (!err) {\r\n                register(values).then((res) => {\r\n                    // 注册成功\r\n                    message.success(res.data.msg);\r\n                    history.push('/login');\r\n                }).catch(err => {\r\n                    // 注册失败\r\n                    message.error(err.respone.data.msg);\r\n                })\r\n            }\r\n        });\r\n    };\r\n    return (\r\n        <div className=\"back\" style={{ height: document.documentElement.clientHeight || document.body.clientHeight }}>\r\n            <div className=\"back1\"></div>\r\n            <Form onSubmit={handleSubmit} className=\"register-container\">\r\n                <h1>GvoBlog</h1>\r\n                <h2>一个共同成长的平台</h2>\r\n                <Form.Item>\r\n                    {getFieldDecorator('username', {\r\n                        rules: [\r\n                            { required: true, message: '请输入用户名!' },\r\n                            { min: 6, max: 14, message: '用户名在6~14位!' }\r\n                        ]\r\n                    })(\r\n                        <Input placeholder=\"用户名（6~14位）\" className=\"input\" />\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('password', {\r\n                        rules: [\r\n                            { required: true, message: '请输入密码!' },\r\n                            { min: 6, max: 14, message: '密码在6~14位!' }\r\n                        ]\r\n                    })(\r\n                        <Input.Password placeholder=\"密码（6~14位）\" className=\"input\" />\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    {getFieldDecorator('email', {\r\n                        rules: [\r\n                            { type: 'email', message: '请输入正确的邮箱格式!' },\r\n                            { required: true, message: '请输入邮箱!' }\r\n                        ]\r\n                    })(\r\n                        <Input placeholder=\"邮箱\" className=\"input\" />\r\n                    )}\r\n                </Form.Item>\r\n                <Button type=\"primary\" htmlType=\"submit\" className=\"btn\">注册</Button>\r\n                <p className=\"login\">已有账号？<Link to=\"/login\">去登录</Link></p>\r\n            </Form>\r\n        </div>\r\n    )\r\n}))\r\n\r\nexport default Login","import axios from 'axios'\r\n\r\nexport default payload => {\r\n    return axios.post('/register', payload)\r\n}","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport Home from './page/Home'\nimport Login from './page/Login'\nimport Register from './page/Register'\n// import test from './components/test'\n\nfunction App() {\n  return (\n    <Switch>\n      {/* <Route path=\"/test\" component={test} /> */}\n      <Route path=\"/register\" component={Register} />\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/\" component={Home} />\n    </Switch>\n  );\n}\n\nexport default App;\n","// 这里写一些全局操作\r\nimport axios from 'axios'\r\n\r\nconst globalInit = () => {\r\n    axios.defaults.baseURL = 'http://localhost:3000/';\r\n    axios.interceptors.request.use(config => {\r\n        // 在发送请求之前做些什么\r\n        const user_info = JSON.parse(localStorage.getItem('user_info'));\r\n        if (user_info) {\r\n            config.headers['Authorization'] = 'Bearer ' + user_info.token;\r\n        }\r\n        return config;\r\n    });\r\n};\r\n\r\nexport default globalInit","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider } from 'react-redux';\nimport store from './store/index';\nimport App from './App';\nimport globalInit from './global'\nimport * as serviceWorker from './serviceWorker';\n\nglobalInit();\n\nReactDOM.render(\n    <BrowserRouter>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </BrowserRouter>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}