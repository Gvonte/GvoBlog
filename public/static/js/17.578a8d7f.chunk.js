(this.webpackJsonptest=this.webpackJsonptest||[]).push([[17],{439:function(e,t,a){},603:function(e,t,a){"use strict";a.r(t);a(594);var n=a(586),r=(a(152),a(150)),c=(a(151),a(137)),l=(a(435),a(595)),o=(a(154),a(157)),s=a(437),i=a.n(s),u=a(176),m=(a(160),a(163)),f=(a(193),a(211)),p=a(0),d=a.n(p),g=a(33),E=a(46),b=a(11),h=(a(439),a(3)),y=a.n(h),v=Object(g.b)((function(e){return{category:e.category,userInfo:e.user}}),{getCategory:E.b})(f.a.create({})((function(e){var t=e.userInfo;if(t.token){if("admin1"!==t.info.username)return m.a.error("\u5f88\u62b1\u6b49\uff0c\u60a8\u6ca1\u6709\u65b0\u5efa\u535a\u5ba2\u7684\u6743\u9650"),d.a.createElement(b.a,{to:"/"});var a=e.category,s=e.getCategory,g=e.form,E=e.history,h=g.getFieldDecorator,v=g.validateFields,C=Object(p.useState)([]),I=Object(u.a)(C,2),w=I[0],S=I[1],j=Object(p.useState)([]),q=Object(u.a)(j,2),O=q[0],D=q[1];Object(p.useEffect)((function(){0===a.length&&s()}),[a.length,s]);var F=function(e){var t=a.map((function(e){return e.name}));D(e?t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())})):t)};return d.a.createElement(f.a,{onSubmit:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),v((function(e,t){var n,r=t.title,c=t.description,l=t.CategoryId,o=t.content;e||(l=a.find((function(e){return e.name===l})).id,o=o.file.response.file,(n={title:r,description:c,CategoryId:l,content:o},y.a.post("/article",n)).then((function(e){m.a.success("\u65b0\u5efa\u6587\u7ae0\u6210\u529f"),E.push("/article/".concat(e.data.data.id))})).catch((function(e){m.a.error(e.response.data.msg)})))}));case 2:case"end":return t.stop()}}))},className:"articlecreate-container",labelAlign:"left",labelCol:{md:{span:3},lg:{span:2}},wrapperCol:{md:{offset:3},lg:{offset:2}},layout:"horizontal"},d.a.createElement(f.a.Item,{label:"\u6807\u9898"},h("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898!"}]})(d.a.createElement(o.a,{className:"input"}))),d.a.createElement(f.a.Item,{label:"\u63cf\u8ff0"},h("description",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63cf\u8ff0!"}]})(d.a.createElement(o.a,{className:"input"}))),d.a.createElement(f.a.Item,{label:"\u5206\u7c7b"},h("CategoryId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b!"},{validator:function(e,t){return a.map((function(e){return e.name})).includes(t)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5206\u7c7b\uff01"}]})(d.a.createElement(l.a,{dataSource:O,onSearch:F,onFocus:F},d.a.createElement(o.a,{className:"input"})))),d.a.createElement(f.a.Item,{label:"\u4e0a\u4f20"},h("content",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u5185\u5bb9!"}]})(d.a.createElement(n.a,{name:"file",customRequest:function(e){(function(e){var t=new FormData;return t.append("file",e),y.a.post("/upload",t,{headers:{"Content-Type":"multipart/form-data"}})})(e.file).then((function(t){e.onSuccess(t.data.data)}))},fileList:w,onChange:function(e){0===e.fileList.length?S([]):S([e.file])}},d.a.createElement(r.a,null,d.a.createElement(c.a,{type:"upload"}),"\u4e0a\u4f20\u535a\u5ba2\uff08MD\u6587\u4ef6\uff09")))),d.a.createElement(f.a.Item,{label:"\u4f20\u56fe\u7247"},d.a.createElement(n.a,{name:"img",customRequest:function(e){(function(e){var t=new FormData;return t.append("file",e),y.a.post("/uploadImg",t,{headers:{"Content-Type":"multipart/form-data"}})})(e.file).then((function(t){e.onSuccess(t.data.data)}))}},d.a.createElement(r.a,null,d.a.createElement(c.a,{type:"upload"}),"\u4e0a\u4f20\u56fe\u7247"))),d.a.createElement(f.a.Item,null,d.a.createElement(r.a,{type:"primary",htmlType:"submit",className:"btn"},"\u65b0\u5efa\u535a\u5ba2")))}return d.a.createElement(b.a,{to:"/login"})})));t.default=v}}]);
//# sourceMappingURL=17.578a8d7f.chunk.js.map